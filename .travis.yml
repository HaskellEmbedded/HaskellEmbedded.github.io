language: haskell
ghc: 7.8
branches:
  only:
  - source
script:
- cabal configure --enable-tests && cabal build && cabal run build
git:
  submodules: false
before_install:
- sed -i 's/git@github.com:/https:\/\/github.com\//' .gitmodules
- git submodule update --init
after_script:
- cd _site
- export REMOTE=$(git config remote.origin.url | sed 's/.*:\/\///')
- git config --global user.email "$GIT_EMAIL"
- git config --global user.name "$GIT_NAME"
- git remote add github https://${GH_TOKEN}@${REMOTE}
- git add --all
- git status
- git commit -m "Built by Travis ( build $TRAVIS_BUILD_NUMBER )"
- git push github master:master | grep -v http
env:
  global:
    secure: dvrhz4aI6c6PbZCWtaVDVGYq1jGqKc7JBHlLTTt2pcdjSeVNF4D5fLtTIH6KjS1+WrjM8Cup61pE8Tx694f/7m1AmG/j4/rqByWfzzfpKjiaaY2+LTsbd0Mu+SPgBHtaohI8eTBZFWIUox1pGILc4Wy0y3hzfyI9gYDdfY3PuMeZaI/+vb4GKsi5bH5Jl9TB+d8wDk8kW3kIN5tTuMImKoKiEAuHTuxvQ2VARo89UkCfNiVe+ntdrr0Qr0W+ldmikY2wh9wWC0iHZVm0R68lcqGNr8pMrv8Yqj+GqQCTUbfcsI99VJERvj9q4hzN5excrorQea/ekmMvHay92JIwem3gCM9BP4r6s3GIWlygSR7aWi0DJxJzbupKK1TH1DPAcwvYa0TDCYSHthjAVIOR5DQT8AcTXp/fWNMvfxBszHqZ+GxCZt+1/llgl+48Z0PbRCd8/4gzxYSC9nos2wy00bbFF0DWdpHLnsB+TV5cXLkhLTTGxkC6kVGWuA04hZkBi9nsV0uP2x1Aew81mu47dTZ9QHkDYr8VSdtZ3tZJmi3l318oDLwQXtvrng6IjQhwh2PPyjnNcgBL7ZGvduB523xI5vQ0QmmV21EjjdT4EhHvOUWmaTeLK89G8Y8vn5XEKDcUuQlP40OmQbhU0TygTkwH5UOdyZWsUuqPl/mKwWI=
